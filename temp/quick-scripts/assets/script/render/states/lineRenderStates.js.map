{"version":3,"sources":["lineRenderStates.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\render\\states","sourcesContent":["import { LineRender } from \"../LineRender\";\r\nimport { MSMDsc } from \"../../../frame/StateMachine/StateDec\";\r\nimport { SLDSM } from \"../../site/SiteLine\";\r\nimport { SiteLineType, ConvertRGBToColor } from \"../../Enums\";\r\n\r\nconst {LineRenderState,LineRenderStateMachine}=LineRender;\r\nconst {mState,mDefaultState,mLinkTo}=MSMDsc\r\nconst {SiteLine}=SLDSM;\r\nexport module LineRenderStates\r\n{\r\n    type LineSave = {type:SiteLineType,node:SLDSM.SiteLine[]}[]\r\n    export class BaseRender extends LineRenderState\r\n    {\r\n        drawCache:LineSave = [];\r\n        draw()\r\n        {\r\n            var g = this.context.graphics;\r\n            var oldWidth = g.lineWidth;\r\n            g.lineWidth = this.context.lineWidth;\r\n            var drawedSite:LineSave = [];\r\n            this.drawCache = drawedSite;\r\n            g.clear();\r\n            SiteLine.SiteLines.forEach(value=>{\r\n                var nowLine = SiteLine.getBeginLine(value.lineType);\r\n                if(!nowLine.isEnd)\r\n                {\r\n                    //取得线段颜色\r\n                    var color = ConvertRGBToColor(value.lineType)\r\n                    g.strokeColor =  color\r\n                    //取第一个节点进行定位\r\n                    var SiteNode = nowLine;\r\n                    if(SiteNode.mask&1)\r\n                    {\r\n                        g.strokeColor = g.strokeColor.setA(125);\r\n                    }\r\n                    g.moveTo(SiteNode.node.x,SiteNode.node.y);\r\n                    SiteNode.changPoint.forEach(value=>{\r\n                        g.lineTo(value.point.x,value.point.y);\r\n                    })\r\n                    var nodes = [SiteNode];\r\n                    drawedSite.push({type:value.lineType,node:nodes});\r\n                    nowLine = nowLine.NextLine;\r\n                    g.stroke();\r\n                    g.strokeColor = color;\r\n                    debugger;\r\n                    while(nowLine)\r\n                    {\r\n                        var nowSiteNode = nowLine;\r\n                        if(nowLine.mask&1)\r\n                        {\r\n                            g.strokeColor = g.strokeColor.setA(125);\r\n                        }\r\n                        g.moveTo(nowSiteNode.node.x,nowSiteNode.node.y);\r\n                        nowSiteNode.changPoint.forEach(value=>{\r\n                            g.lineTo(value.point.x,value.point.y);\r\n                        })\r\n                        nowLine = nowLine.NextLine;\r\n                        nodes.push(nowSiteNode);\r\n                        g.stroke();\r\n                        g.strokeColor = color;\r\n                    }\r\n                    \r\n                }\r\n            });\r\n            g.lineWidth=oldWidth;\r\n            \r\n        }\r\n    }\r\n    \r\n    @mDefaultState\r\n    @mLinkTo('DragLine','drag')\r\n    @mState('Default',LineRenderStateMachine)\r\n    export class Default extends BaseRender\r\n    {\r\n        updateRender()\r\n        {\r\n            this.draw();\r\n        }\r\n    }\r\n    \r\n    @mLinkTo('Default','dragEnd')\r\n    @mState('DragLine',LineRenderStateMachine)\r\n    export class DragLine extends BaseRender\r\n    {\r\n\r\n    }\r\n}"]}