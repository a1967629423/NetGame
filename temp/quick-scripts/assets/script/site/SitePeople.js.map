{"version":3,"sources":["SitePeople.ts"],"names":[],"mappings":";;;;;AAAA,kCAAoC;AAKpC,qDAA8C;AAG9C,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;AAE7F,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAwC,8BAAY;IADpD;QAAA,qEA8GC;QAnGG,wBAAwB;QACxB,eAAe;QAEf,gBAAU,GAAa,gBAAQ,CAAC,IAAI,CAAA;QACpC,gBAAU,GAAuB,IAAI,CAAA;;QA8FrC,iBAAiB;IACrB,CAAC;IA5GG,0BAAK,GAAL;QACI,mBAAK,CAAC,WAAW,CAAC,WAAW,CAAC,mBAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACtE,CAAC;IACD,0BAAK,GAAL;IAEA,CAAC;IACD,4BAAO,GAAP,UAAQ,KAAU;IAElB,CAAC;IAMD,0BAAK,GAAL;IACA,CAAC;IACD,iCAAY,GAAZ,UAAa,OAA+B;QACxC,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC;QACzB,IAAI,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC;QAC3B,IAAI,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC;QACzD,IAAI,iBAAiB,GAAuB,EAAE,CAAA;QAE9C,QAAQ;QACR,qCAAqC;QACrC,wCAAwC;QACxC,iCAAiC;QACjC,qBAAqB;QACrB,2FAA2F;QAC3F,kCAAkC;QAClC,2BAA2B;QAC3B,YAAY;QACZ,gCAAgC;QAChC,QAAQ;QACR,iCAAiC;QACjC,qBAAqB;QACrB,2FAA2F;QAC3F,kCAAkC;QAClC,0BAA0B;QAC1B,YAAY;QACZ,+BAA+B;QAC/B,QAAQ;QAER,IAAI;QACJ,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,kCAAa,GAAb,UAAc,OAA+B;QACzC,4BAA4B;QAC5B,8BAA8B;QAC9B,iEAAiE;QACjE,4DAA4D;QAC5D,aAAa;QACb,eAAe;QACf,eAAe;QACf,wBAAwB;QACxB,yBAAyB;QACzB,qBAAqB;QACrB,8FAA8F;QAC9F,2BAA2B;QAC3B,gBAAgB;QAChB,QAAQ;QACR,YAAY;QACZ,8DAA8D;QAC9D,IAAI;QACJ,6CAA6C;QAC7C,+CAA+C;QAC/C,iDAAiD;QACjD,oCAAoC;QACpC,yBAAyB;QACzB,+DAA+D;QAC/D,oCAAoC;QACpC,oCAAoC;QACpC,wBAAwB;QACxB,gBAAgB;QAChB,qBAAqB;QACrB,oCAAoC;QACpC,YAAY;QACZ,qCAAqC;QACrC,sBAAsB;QACtB,+DAA+D;QAC/D,oCAAoC;QACpC,oCAAoC;QACpC,wBAAwB;QACxB,gBAAgB;QAChB,qBAAqB;QACrB,oCAAoC;QACpC,YAAY;QAEZ,QAAQ;QACR,IAAI;QACJ,0BAA0B;QAC1B,IAAI;QACJ,uCAAuC;QACvC,QAAQ;QACR,wBAAwB;QACxB,QAAQ;QACR,mBAAmB;QACnB,IAAI;QACJ,OAAO;QACP,IAAI;QACJ,oBAAoB;QACpB,QAAQ;QACR,uBAAuB;QACvB,QAAQ;QACR,IAAI;QAEJ,OAAO,KAAK,CAAC;IACjB,CAAC;IA9FD;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,gBAAQ,CAAC,EAAE,CAAC;kDACF;IAbnB,UAAU;QAD9B,OAAO;OACa,UAAU,CA6G9B;IAAD,iBAAC;CA7GD,AA6GC,CA7GuC,EAAE,CAAC,SAAS,GA6GnD;kBA7GoB,UAAU","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\site","sourcesContent":["import { SiteType } from \"../Enums\";\r\nimport { Vehicle } from \"../vehicle/VehicleMachine\";\r\nimport { SiteSM, SiteLineSM } from \"./SiteMachine\";\r\nimport { SLDSM } from \"./SiteLine\";\r\nimport ObjectPool, { IObpool, IOFPool } from \"../../frame/ObjectPool/ObjectPool\";\r\nimport { Score } from \"../manage/ScoreManage\";\r\nimport { Path } from \"../Path/PathSM\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SitePeople extends cc.Component implements IObpool {\r\n    unuse() {\r\n        Score.ScoreManage.getInstance(Score.ScoreType.people).addScore(1);\r\n    }\r\n    reuse() {\r\n\r\n    }\r\n    recycle(value: any) {\r\n\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n    // onLoad () {}\r\n    @property({ type: cc.Enum(SiteType) })\r\n    peopleType: SiteType = SiteType.rect\r\n    sourceSite: SiteSM.SiteMachine = null\r\n    start() {\r\n    }\r\n    GetInVehicle(vehicle: Vehicle.VehicleMachine): boolean {\r\n        var dir = vehicle.rundir;\r\n        var nowLine = vehicle.line;\r\n        var nextLine = dir ? nowLine.NextPath : nowLine.LastPath;\r\n        var hastOtherLineSite: Path.VehiclePath[] = []\r\n\r\n        //到终点都没有\r\n        // for (var i in hastOtherLineSite) {\r\n        //     var value = hastOtherLineSite[i];\r\n        //     var next = value.NextLine;\r\n        //     while (next) {\r\n        //         if (next.NowSite.SiteType === this.peopleType&&next.NowSite!==this.sourceSite) {\r\n        //             console.log('要去转车')\r\n        //             return true;\r\n        //         }\r\n        //         next = next.NextLine;\r\n        //     }\r\n        //     var last = value.LastLine;\r\n        //     while (last) {\r\n        //         if (last.NowSite.SiteType === this.peopleType&&last.NowSite!==this.sourceSite) {\r\n        //             console.log('要去转车')\r\n        //             return true\r\n        //         }\r\n        //         last = last.LastLine\r\n        //     }\r\n\r\n        // }\r\n        return false;\r\n    }\r\n    GetOffVehicle(vehicle: Vehicle.VehicleMachine): boolean {\r\n        // var dir = vehicle.rundir;\r\n        // var nowLine = vehicle.line;\r\n        // if (nowLine.NowSite.SiteType === this.peopleType) return true;\r\n        // var nextLine = dir ? nowLine.NextLine : nowLine.LastLine;\r\n        // var ni =0;\r\n        // var oni = 0;\r\n        // var oli = 0;\r\n        // var mainHave = false;\r\n        // var otherHave = false;\r\n        // while (nextLine) {\r\n        //     if (nextLine.NowSite.SiteType === this.peopleType&&nextLine.NowSite!=this.sourceSite) {\r\n        //         mainHave = true;\r\n        //         break\r\n        //     }\r\n        //     ni++;\r\n        //     nextLine = dir ? nextLine.NextLine : nextLine.LastLine;\r\n        // }\r\n        // for (var i in nowLine.NowSite.SiteLines) {\r\n        //     var value = nowLine.NowSite.SiteLines[i]\r\n        //     if (value.LineType !== nowLine.LineType) {\r\n        //         var next = value.NextLine\r\n        //         while (next) {\r\n        //             if (next.NowSite.SiteType === this.peopleType) {\r\n        //                 console.log('转车')\r\n        //                 otherHave = true;\r\n        //                 break\r\n        //             }\r\n        //             oni++;\r\n        //             next = next.NextLine;\r\n        //         }\r\n        //         var last = value.LastLine;\r\n        //         if (last) {\r\n        //             if (last.NowSite.SiteType === this.peopleType) {\r\n        //                 console.log('转车')\r\n        //                 otherHave = true;\r\n        //                 break\r\n        //             }\r\n        //             oli++;\r\n        //             last = last.LastLine;\r\n        //         }\r\n\r\n        //     }\r\n        // }\r\n        // if(mainHave&&otherHave)\r\n        // {\r\n        //     if(mainHave&&(ni<=oni||ni<=oli))\r\n        //     {\r\n        //         return false;\r\n        //     }\r\n        //     return true;\r\n        // }\r\n        // else\r\n        // {\r\n        //     if(otherHave)\r\n        //     {\r\n        //         return true;\r\n        //     }\r\n        // }\r\n\r\n        return false;\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}