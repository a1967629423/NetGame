{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\vehicle/assets\\script\\vehicle\\VehicleMachine.ts"],"names":[],"mappings":";;;;;AAAA,sEAA4D;AAC5D,8DAA2D;AAC3D,iDAA4C;AAI5C,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;AAC7F,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AACrC,IAAA,mDAAe,EAAC,uCAAS,CAAQ;AACxC,IAAc,OAAO,CA+CpB;AA/CD,WAAc,OAAO;IAGjB;QAAoC,kCAAgB;QAFpD;YAAA,qEAyCC;YArCG,aAAO,GAAgB,EAAE,CAAA;YACzB,UAAI,GAAkB,IAAI,CAAA;YAC1B,aAAO,GAAsB,IAAI,CAAA;YACjC,iBAAW,GAAS,CAAC,CAAC;YACtB,eAAS,GAAU,CAAC,CAAC;YACrB,UAAI,GAAU,GAAG,CAAC;YAClB,YAAM,GAAW,IAAI,CAAC;;QA+B1B,CAAC;2BAvCY,cAAc;QASvB,oCAAW,GAAX;YAEI,IAAG,IAAI,CAAC,IAAI,EACZ;gBACI,OAAO,IAAI,CAAC,MAAM,CAAA,CAAC,CAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAA,CAAC,CAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;aAC5D;QACL,CAAC;QACD,oCAAW,GAAX;YAEI,IAAG,IAAI,CAAC,IAAI,EACZ;gBACI,OAAO,IAAI,CAAC,MAAM,CAAA,CAAC,CAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAA,CAAC,CAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;aAC5D;QACL,CAAC;QACM,sBAAO,GAAd,UAAe,IAAmB,EAAC,QAAuB,EAAC,IAAY;YAEnE,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAc,CAAC,CAAC;YAChD,IAAI,QAAQ,GAAW,IAAI,CAAA;YAC3B,IAAG,QAAQ,YAAY,EAAE,CAAC,IAAI,EAC9B;gBACI,QAAQ,GAAG,QAAQ,CAAC;aACvB;iBAED;gBACI,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBACxC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;aAC9B;YACD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;QACxB,CAAC;;QApCD;YADC,QAAQ,CAAC,oBAAU,CAAC;uDACI;QAFhB,cAAc;YAF1B,iBAAM,CAAC,aAAa;YACpB,OAAO;WACK,cAAc,CAuC1B;QAAD,qBAAC;KAvCD,AAuCC,CAvCmC,kBAAG,CAAC,YAAY,GAuCnD;IAvCY,sBAAc,iBAuC1B,CAAA;IACD;QAAkC,gCAAS;QAA3C;;QAGA,CAAC;QAAD,mBAAC;IAAD,CAHA,AAGC,CAHiC,kBAAG,CAAC,KAAK,GAG1C;IAHY,oBAAY,eAGxB,CAAA;AACL,CAAC,EA/Ca,OAAO,GAAP,eAAO,KAAP,eAAO,QA+CpB","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\vehicle","sourcesContent":["import { MSM } from \"../../frame/StateMachine/StateMachine\";\r\nimport { MSMDsc } from \"../../frame/StateMachine/StateDec\";\r\nimport SitePeople from \"../site/SitePeople\";\r\nimport { SiteLineSM, SiteSM } from \"../site/SiteMachine\";\r\nimport { SLDSM } from \"../site/SiteLine\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nconst { ccclass, property } = cc._decorator;\r\nconst {mSyncAttachFunc,mSyncFunc}=MSMDsc\r\nexport module Vehicle {\r\n    @MSMDsc.mStateMachine\r\n    @ccclass\r\n    export class VehicleMachine extends MSM.StateMachine {\r\n        @property(SitePeople)\r\n        peoples:SitePeople[] = []\r\n        line:SLDSM.SiteLine = null\r\n        nowSite:SiteSM.SiteMachine = null\r\n        nowProgress:number= 0;\r\n        allLength:number = 0;\r\n        rate:number = 100;\r\n        rundir:boolean = true;\r\n        getNextLine()\r\n        {\r\n            if(this.line)\r\n            {\r\n                return this.rundir?this.line.NextLine:this.line.LastLine;\r\n            }\r\n        }\r\n        getLastLine()\r\n        {\r\n            if(this.line)\r\n            {\r\n                return this.rundir?this.line.LastLine:this.line.NextLine;\r\n            }\r\n        }\r\n        static Factory(line:SLDSM.SiteLine,progress:number|cc.Vec2,node:cc.Node)\r\n        {\r\n            var vehicle = node.getComponent(VehicleMachine);\r\n            var position:cc.Vec2 = null\r\n            if(progress instanceof cc.Vec2)\r\n            {\r\n                position = progress;\r\n            }\r\n            else\r\n            {\r\n                var result = line.getLocation(progress);\r\n                position = result.position;\r\n            }\r\n            node.position = position;\r\n            vehicle.line = line;\r\n        }\r\n    }\r\n    export class VehicleState extends MSM.State\r\n    {\r\n        context:VehicleMachine\r\n    }\r\n}\r\n\r\n\r\n"]}